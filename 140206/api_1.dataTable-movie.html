<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>電影搜尋排行榜</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css"
        integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">
    <style>
        .movie-list {
            max-height: 400px;
            overflow-y: scroll;
        }

        .movie-item {
            cursor: pointer;
        }

        .movie-item:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>

<body>
    <div class="container mt-5">
        <h1>懷舊電影搜尋排行榜</h1>
        <div class="row">
            <div class="col-12 col-md-6">
                <h4>排行榜</h4>
                <table id="movieTable" class="table table-striped">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>電影名稱</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-movie="Inception">
                            <td>1</td>
                            <td>Inception (全面啟動)</td>
                        </tr>
                        <tr data-movie="The Dark Knight">
                            <td>2</td>
                            <td>The Dark Knight (黑暗騎士)</td>
                        </tr>
                        <tr data-movie="The Matrix">
                            <td>3</td>
                            <td>The Matrix (黑客帝國)</td>
                        </tr>
                        <tr data-movie="Titanic">
                            <td>4</td>
                            <td>Titanic (鐵達尼號)</td>
                        </tr>
                        <tr data-movie="The Shawshank Redemption">
                            <td>5</td>
                            <td>The Shawshank Redemption (刺激1995)</td>
                        </tr>
                        <tr data-movie="Forrest Gump">
                            <td>6</td>
                            <td>Forrest Gump (阿甘正傳)</td>
                        </tr>
                        <tr data-movie="The Godfather">
                            <td>7</td>
                            <td>The Godfather (教父)</td>
                        </tr>
                        <tr data-movie="Avengers: Endgame">
                            <td>8</td>
                            <td>Avengers: Endgame (復仇者聯盟：終局之戰)</td>
                        </tr>
                        <tr data-movie="The Lion King">
                            <td>9</td>
                            <td>The Lion King (獅子王)</td>
                        </tr>
                        <tr data-movie="Interstellar">
                            <td>10</td>
                            <td>Interstellar (星際穿越)</td>
                        </tr>
                        <tr data-movie="Pulp Fiction">
                            <td>11</td>
                            <td>Pulp Fiction (低俗小說)</td>
                        </tr>
                        <tr data-movie="The Lord of the Rings: The Fellowship of the Ring">
                            <td>12</td>
                            <td>The Lord of the Rings: The Fellowship of the Ring (魔戒：護戒使者)</td>
                        </tr>
                        <tr data-movie="Spider-Man: No Way Home">
                            <td>13</td>
                            <td>Spider-Man: No Way Home (蜘蛛人：無家日)</td>
                        </tr>
                        <tr data-movie="Jurassic Park">
                            <td>14</td>
                            <td>Jurassic Park (侏羅紀公園)</td>
                        </tr>
                        <tr data-movie="The Silence of the Lambs">
                            <td>15</td>
                            <td>The Silence of the Lambs (沉默的羔羊)</td>
                        </tr>
                        <tr data-movie="Fight Club">
                            <td>16</td>
                            <td>Fight Club (鬥陣俱樂部)</td>
                        </tr>
                        <tr data-movie="Gladiator">
                            <td>17</td>
                            <td>Gladiator (角鬥士)</td>
                        </tr>
                        <tr data-movie="Deadpool">
                            <td>18</td>
                            <td>Deadpool (死侍)</td>
                        </tr>
                        <tr data-movie="Harry Potter and the Sorcerer's Stone">
                            <td>19</td>
                            <td>Harry Potter and the Sorcerer's Stone (哈利波特與魔法石)</td>
                        </tr>
                        <tr data-movie="Shutter Island">
                            <td>20</td>
                            <td>Shutter Island (禁閉島)</td>
                        </tr>
                        <tr data-movie="Guardians of the Galaxy">
                            <td>21</td>
                            <td>Guardians of the Galaxy (銀河護衛隊)</td>
                        </tr>
                        <tr data-movie="Star Wars: A New Hope">
                            <td>22</td>
                            <td>Star Wars: A New Hope (星際大戰：新希望)</td>
                        </tr>
                        <tr data-movie="The Prestige">
                            <td>23</td>
                            <td>The Prestige (致命魔術)</td>
                        </tr>
                        <tr data-movie="Goodfellas">
                            <td>24</td>
                            <td>Goodfellas (好家伙)</td>
                        </tr>
                        <tr data-movie="The Green Mile">
                            <td>25</td>
                            <td>The Green Mile (綠色奇蹟)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-12 col-md-6">
                <h4>搜尋結果</h4>
                <div id="movie-info">
                    <p>請從排行榜中選擇電影。</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function () {
            const apiKey = "26a7a91a";
            const url = "https://www.omdbapi.com/";

            // 初始化 DataTable
            var table = $('#movieTable').DataTable();

            // 當點擊電影名稱時觸發搜尋
            $('#movieTable tbody').on('click', 'tr', function () {
                const movieTitle = $(this).data('movie');
                const requestUrl = `${url}?t=${movieTitle}&apikey=${apiKey}`;

                $.ajax({
                    type: "GET",
                    url: requestUrl,
                    dataType: "json",
                    success: function (res) {
                        if (res.Response === "True") {
                            const title = res.Title;
                            const year = res.Year;
                            const plot = res.Plot;
                            const poster = res.Poster;
                            const imdbRating = res.imdbRating;

                            $('#movie-info').html(`
                                <h4>${title} (${year})</h4>
                                <img src="${poster}" alt="${title}" class="img-fluid">
                                <p><strong>IMDb 評分:</strong> ${imdbRating}</p>
                                <p><strong>劇情簡介:</strong> ${plot}</p>
                            `);
                        } else {
                            $('#movie-info').html('<p>找不到該電影資料。</p>');
                        }
                    },
                    error: function (err) {
                        console.error("Error fetching movie data:", err);
                        $('#movie-info').html('<p>無法取得電影資料，請稍後再試。</p>');
                    }
                });
            });

            // 頁面加載後自動點擊第一部電影
            $('#movieTable tbody tr:first').click();
        });
    </script>
</body>

</html>
